<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:cc="http://java.sun.com/jsf/composite">
<h:head>
	<title>AltShop</title>
	<link rel="shortcut icon"
		href="https://pbs.twimg.com/profile_images/905769842254520320/SktRHT6V_400x400.jpg" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords"
		content="Buy_shop Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
	<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
	<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<!-- Custom Theme files -->
	<link href="css/style.css" rel='stylesheet' type='text/css' />
	<!-- Custom Theme files -->
	<!--webfont-->
	<link
		href='http://fonts.googleapis.com/css?family=Lato:100,200,300,400,500,600,700,800,900'
		rel='stylesheet' type='text/css' />
	<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
	<!-- start menu -->
	<link href="css/megamenu.css" rel="stylesheet" type="text/css"
		media="all" />
	<script type="text/javascript" src="js/megamenu.js"></script>
	<script>$(document).ready(function(){$(".megamenu").megamenu();});</script>
	<script
		src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<script src="http://code.jquery.com/jquery-migrate-1.2.1.js"></script>

</h:head>
<body>
	<p:growl id="growl" sticky="true" showDetail="false" />
	<div class="header_top">
		<div class="container">
			<div class="cssmenu column row_1">
				<ul>
					<c:if test="#{not empty usuario}">
						<h:form enctype="multipart/form-data">
							<li class="active"><p:commandLink class="color1"
									onclick="PF('dlg3').show();#{usuariosManaged.cargaEdit(usuario)}">Bienvenido #{usuario.nick}</p:commandLink></li>
							<p:dialog header="Editar Usuario" widgetVar="dlg3"
								showEffect="explode" hideEffect="explode" resizable="false"
								modal="true">
								<h:panelGrid columns="2" cellpadding="10">

									<p:inputText type="hidden" value="#{usuariosManaged.correoOld}" />

									<p:inputText type="hidden" value="#{usuariosManaged.nickOld}" />

									<p:inputText type="hidden"
										value="#{usuariosManaged.nivelAcceso}" />

									<p:inputText type="hidden" value="#{usuariosManaged.idUsuario}" />

									<h:outputLabel for="nombre" value="Nombre" />
									<p:inputText id="nombre" maxlength="45"
										value="#{usuariosManaged.nombre}" required="true"
										validatorMessage="Nombre invalido"
										requiredMessage="Nombre Obligatorio" size="45" />


									<h:outputLabel for="apellidos" value="Apellidos" />
									<p:inputText maxlength="45"
										value="#{usuariosManaged.apellidos}" required="true"
										validatorMessage="Apellidos invalido"
										requiredMessage="Apellidos Obligatorio" size="45" />


									<h:outputLabel for="correo" value="Correo" />
									<p:inputText id="correo" maxlength="45" required="true"
										value="#{usuariosManaged.correo}"
										validatorMessage="Email Invalido"
										requiredMessage="Email Obligatorio" size="45">
										<f:validateRegex
											pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}" />
									</p:inputText>

									<h:outputLabel for="nick" value="Nick" />
									<p:inputText maxlength="15" id="nick"
										value="#{usuariosManaged.nick}" required="true"
										validatorMessage="Nick Invalido"
										requiredMessage="Nick Obligatorio" />

									<h:outputLabel for="dni" value="DNI" />
									<p:inputText id="dni" maxlength="9"
										value="#{usuariosManaged.dni}" required="true"
										validatorMessage="DNI Invalido"
										requiredMessage="DNI Obligatorio">
										<f:validateRegex
											pattern="^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}" />
									</p:inputText>


									<h:outputLabel for="direccion" value="Dirección" />
									<p:inputText maxlength="45" id="direccion"
										value="#{usuariosManaged.direccion}" required="true"
										validatorMessage="Direccion Invalida"
										requiredMessage="Direccion Obligatoria" size="45" />


									<h:outputLabel for="contacto" value="Contacto" />
									<p:inputText maxlength="9" id="contacto"
										value="#{usuariosManaged.contacto}" required="true"
										validatorMessage="Movil Invalido"
										requiredMessage="Movil Obligatorio"
										converterMessage="Teléfono Invalido">
										<f:validateDoubleRange minimum="600000000" maximum="799999999" />
									</p:inputText>

									<h:outputLabel for="pwd" value="Contraseña Actual" />
									<p:password id="pwd" required="true"
										value="#{usuariosManaged.contrasena}"
										validatorMessage="Contraseña Incorrecta"
										requiredMessage="Contraseña Obligatoria" />

									<h:outputLabel for="pwd1" value="Nueva Contraseña" />
									<p:password id="pwd1"
										value="#{usuariosManaged.nuevaContraseña}" match="pwd2"
										label="Password 1"
										validatorMessage="La contraseña no coincide con la de confirmación" />

									<h:outputLabel for="pwd2" value="Confirmar Nueva Contraseña" />
									<p:password id="pwd2" label="Password 2"
										validatorMessage="Contraseña de confirmación Invalida"
										requiredMessage="Contraseña de confirmación Obligatoria" />

									<h:outputLabel for="img" value="Imagen Actual" />
									<p:graphicImage id="img" value="#{usuariosManaged.image}"
										width="100px" height="100px" cache="false">
										<f:param name="imageeID" value="#{usuariosManaged.idUsuario}" />
									</p:graphicImage>

									<p:fileUpload value="#{usuariosManaged.file}" mode="simple"
										skinSimple="true" validatorMessage="Imagen Invalida"
										update="growl" />



									<f:facet name="footer">
										<p:commandButton ajax="false" value="Editar" update="growl"
											action="#{usuariosManaged.editarUsuario()}" />
									</f:facet>
								</h:panelGrid>
							</p:dialog>
						</h:form>
					</c:if>
					<c:if test="#{empty usuario}">
						<li class="active"><p:link class="color1" outcome="log">Mi Cuenta</p:link></li>
					</c:if>
				</ul>
			</div>
			<div class="cssmenu">
				<ul>
					<c:if test="#{not empty usuario}">
						<h:form>
							<li class="active"><p:commandLink class="color3"
									update="growl" action="#{usuariosManaged.logout()}">Salir</p:commandLink></li>
						</h:form>
					</c:if>
				</ul>
			</div>
		</div>
	</div>
	<div class="wrap-box"></div>
	<div class="header_bottom">
		<div class="container">
			<div class="col-xs-8 header-bottom-left">
				<div class="col-xs-2 logo">
					<h1>
						<p:link outcome="inicio">
							<span>Alt</span>shop</p:link>
					</h1>
				</div>
				<div class="col-xs-6 menu">
					<ul class="megamenu skyblue">
						<li><p:link class="color1" outcome="categorias">Categorias</p:link>
							<div class="megapanel">
								<div class="row">
									<div class="col1">
										<div class="h_nav">
											<ul>
												<c:forEach begin="0"
													end="#{categoriasManaged.categorias.size()-1}" var="cat">
													<li value=""><p:link outcome="productos"
															value="#{categoriasManaged.categorias.get(cat).nombre}">
															<f:param name="catID"
																value="#{categoriasManaged.categorias.get(cat).idcategorias}" />
														</p:link></li>
												</c:forEach>
											</ul>
										</div>
									</div>
								</div>
							</div></li>
						<li><p:link class="color4" outcome="about">About</p:link></li>
						<c:if
							test="#{not empty usuario and usuario.tipoUsuarios.idtipousuarios eq 1}">
							<li><p:link class="color6" outcome="usuarios">Administrar Usuarios</p:link></li>
						</c:if>
					</ul>
				</div>
			</div>
			<h:form id="carrito">
				<div class="col-xs-4 header-bottom-right">
					<div class="box_1-cart">
						<div class="box_11">
							<p:link outcome="checkout">
								<h4>
									<p>
										Cesta: <span class="simpleCart_total">#{comprasManaged.totalCarrito()}€</span>
										(<span id="simpleCart_quantity" class="simpleCart_quantity">#{comprasManaged.productosCheckOut().size()}</span>
										Articulos)
									</p>
									<img src="images/bag.png" alt="" />
									<div class="clearfix"></div>
								</h4>
							</p:link>
						</div>
						<p class="empty">
							<p:commandLink action="#{comprasManaged.deleteAllCarrito()}"
								class="simpleCart_empty"
								update="precio growl total carrito @(.lista)">Vaciar Carrito</p:commandLink>
						</p>
						<div class="clearfix"></div>
					</div>
				</div>
			</h:form>
			<div class="clearfix"></div>
		</div>
	</div>
	<div class="container">
		<div class="check">
			<div class="col-md-9 cart-items">
				<h1>
					<h:outputText
						value="Mi Carrito (#{comprasManaged.productosCheckOut().size()})"
						id="total" />
				</h1>
				<c:forEach begin="0"
					end="#{comprasManaged.productosCheckOut().size()-1}" var="pro">


					<h:form class="lista">
						<script>$(document).ready(function(c) {
					$('.close#{pro+1}').on('click', function(c){
						$('.cart-header#{pro+1}').fadeOut('slow', function(c){
							$('.cart-header#{pro+1}').remove();							
						});
						});	

					$('.simpleCart_empty').on('click', function(c){
						$('.listado').fadeOut('slow', function(c){
							$('.listado').remove();
							
						});
						});	
					  
					});  
					
			   </script>
						<div class="listado cart-header#{pro+1}">
							<h:form>
								<p:commandLink class='close#{pro+1}'
									action="#{comprasManaged.deleteCarrito(comprasManaged.productosCheckOut().get(pro))}"
									update="precio growl total carrito" />
							</h:form>
							<div class="cart-sec simpleCart_shelfItem">
								<div class="cart-item cyc">
									<p:graphicImage value="#{productosManaged.image}" width="100%"
										height="150px" cache="false">
										<f:param name="imageID"
											value="#{comprasManaged.productosCheckOut().get(pro).idproductos}" />
									</p:graphicImage>
								</div>
								<div class="cart-item-info">
									<h3>
										<p:link outcome="single"
											value="#{comprasManaged.productosCheckOut().get(pro).nombre}">
											<f:param name="proID"
												value="#{comprasManaged.productosCheckOut().get(pro).idproductos}" />
										</p:link>
										<span>Referencia:
											#{comprasManaged.productosCheckOut().get(pro).uuid}</span>
									</h3>
									<ul class="qty">
										<li><p>Precio Unidad:
												#{comprasManaged.productosCheckOut().get(pro).precio} €</p></li>
										<c:set var="var"
											value="#{comprasManaged.cantidadProductosCheckOut(comprasManaged.productosCheckOut().get(pro))}"></c:set>

										<li>
											<p>
												<c:if test="#{var gt 1}">
													<p:commandLink class="glyphicon glyphicon-minus"
														action="#{comprasManaged.deletePro(comprasManaged.productosCheckOut().get(pro))}"
														update="precio growl total @(.lista) cantidad carrito" />
												</c:if>
												<h:outputText
													value="Cantidad: #{comprasManaged.cantidadProductosCheckOut(comprasManaged.productosCheckOut().get(pro))}"
													id="cantidad"></h:outputText>
												<p:commandLink class="glyphicon glyphicon-plus"
													action="#{comprasManaged.anadirCarrito(comprasManaged.productosCheckOut().get(pro), 1)}"
													update="precio growl total @(.lista) cantidad carrito" />
											</p>
										</li>
									</ul>
									<div class="delivery">
										<p>Garantia:
											#{comprasManaged.productosCheckOut().get(pro).garantia} Años</p>
										<span>Año de producción:
											#{comprasManaged.productosCheckOut().get(pro).ano}</span>
										<div class="clearfix"></div>
									</div>
								</div>
								<div class="clearfix"></div>

							</div>
						</div>
					</h:form>
				</c:forEach>
			</div>
			<h:form id="precio">
				<div class="col-md-3 cart-total">
					<!-- <a class="continue" href="#">Continue to basket</a>	 -->
					<div class="price-details">
						<h3>Detalles</h3>
						<c:forEach begin="0"
							end="#{comprasManaged.productosCheckOut().size()-1}" var="pro">
							<span>#{comprasManaged.productosCheckOut().get(pro).nombre}</span>
							<span class="total1">#{comprasManaged.cantidadProductosCheckOut(comprasManaged.productosCheckOut().get(pro))*comprasManaged.productosCheckOut().get(pro).precio}€</span>
						</c:forEach>
						<div class="clearfix"></div>
					</div>
					<ul class="total_price">
						<li class="last_price">
							<h4>TOTAL</h4>
						</li>
						<li class="last_price"><h:outputText
								value="#{comprasManaged.totalCarrito()}€"></h:outputText></li>
						<div class="clearfix"></div>
					</ul>


					<div class="clearfix"></div>
					<c:if test="#{not empty usuario}">

						<p:commandLink class="order"
							action="#{comprasManaged.crearCompra()}" update="growl">Comprar</p:commandLink>
						<div class="total-item">
							<h3>Forma de Pago</h3>

							<p:selectOneMenu value="#{comprasManaged.idFormaPago}"
								style="width:100%" required="true"
								requiredMessage="Forma Pago Obligatoria">
								<f:selectItem itemLabel="Seleccione una opción" itemValue="" />

								<c:forEach var="fp" items="#{formaPagoManaged.formasDePago}">
									<f:selectItem itemLabel="#{fp.nombre}"
										itemValue="#{fp.idformapago}" />
								</c:forEach>
							</p:selectOneMenu>

							<h3 style="margin-top: 10%;">Forma de Envio</h3>

							<p:selectOneMenu value="#{comprasManaged.idFormaEnvio}"
								style="width:100%" required="true"
								requiredMessage="Forma Envio Obligatoria">
								<f:selectItem itemLabel="Seleccione una opción" itemValue="" />

								<c:forEach var="fe" items="#{formaEnvioManaged.formasDeEnvio}">
									<f:selectItem itemLabel="#{fe.nombre}"
										itemValue="#{fe.idformaenvio}" />
								</c:forEach>
							</p:selectOneMenu>
						</div>
					</c:if>
				</div>
			</h:form>
			<div class="clearfix"></div>
		</div>
	</div>
	<div class="footer">
		<div class="container">
			<div class="footer_top">
				<div class="col-md-4 box_3">
					<h3>Nuestra Tienda</h3>
					<address class="address">
						<p>Calle La Rosaleda 8</p>
						<dl>
							<dt></dt>
							<dd>
								Movil:<span> 658965420</span>
							</dd>
							<dd>
								Fijo:<span> 958655986</span>
							</dd>
							<dd>
								FAX: <span>958655986</span>
							</dd>
							<dd>
								E-mail:&nbsp; <a href="enjutojose@hotmail.com">enjutojose@hotmail.com</a>
							</dd>
						</dl>
					</address>
					<ul class="footer_social">
						<li><a
							href="https://www.facebook.com/joseantonio.fernandezromero.146?ref=br_rs">
								<i class="fb"> </i>
						</a></li>
						<li><a href="https://twitter.com/enjutojose?lang=es"><i
								class="tw"> </i> </a></li>
						<li><a href="https://plus.google.com/104587497418137814045"><i
								class="google"> </i> </a></li>
						<li><a href="https://www.instagram.com/enjutojose/"><i
								class="instagram"> </i> </a></li>
					</ul>
				</div>
				<div class="col-4 col-md-8 box_3">
					<iframe
						src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1585.3022360786913!2d-5.948408091737173!3d37.375534776440944!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd126ee40fe353ad%3A0xb6aa57c53acf7f1e!2sColegio+Concertado+Altair!5e0!3m2!1ses!2ses!4v1523144490235"
						width="100%" height="250" frameborder="0" style="border: 0"></iframe>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="footer_bottom">
				<div class="copy">
					<p>Copyright © 2018 Enjutojose. All Rights Reserved.</p>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
